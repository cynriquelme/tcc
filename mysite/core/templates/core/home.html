{% extends 'core/base.html' %}

{% block title %}Portada{% endblock %}

{% block background %}{% load static %}{% static 'core/img/lupa.jpg' %}{% endblock %}

{% block headers %}

{% endblock %}

{% block content %}
    <div class="filter-section">
        <div class="filter-title">Filtrar por</div>
            <div style="padding: 0px 0px 0px 0px;">
                    <ul class="filter-option">
                        <div class="input-group date" id="filtro_FechaDesde">
                            <label for="filterdate" class="mt-2 mr-2">Fecha desde</label>
                            <input type="date" class="form-control mb-2 mt-1 mr-5" id="filterdate" name="filterdate">
                            <label for="filterdate2" class="mt-2 mr-2">Fecha hasta</label>
                            <input type="date" class="form-control mb-2 mt-1 mr-5" id="filterdate2" name="filterdate2">
                        </div>
                    {% for category in categories %}
                        <li class="float">{{category.description}}<i class="fa fa-fw fa-angle-down" id="icon"></i>
                            {% for sub_category in sub_categories %}
                                {% if sub_category.category_id == category.id%}
                                    <ul>
                                        <li><a href=""><input type="checkbox" id="{{sub_category.id}}"> {{sub_category.description}}</a></li>
                                    </ul>
                                {% endif %}
                            {% endfor %}
                        </li>
                        {% endfor %}
                    </ul>
            </div>
        <button id="btn_filter" class="btn btn-secondary mb-2">Filtrar</button>
    </div>
    <div id="main">
        <h1 class="title" style="text-align: center; margin-top: 5px;">Últimos Reportes</h1>
        <div class="row"> 
            {% for report in reports %}
              {% if report.status == True %}
            <div class="card" style="width: 18rem; margin: 20px; margin-bottom: 10px;">
                {% if report.image %}
                    <img class="img-fluid" src="{{report.image}}" alt="Card image cap">
                {% else %}
                    <img class="img-fluid" src="{% static 'core/img/img-reporte.png' %}" alt="Card image cap">
                {% endif %}
                 
                <div class="card-body">
                  <h5 class="card-title">{{report.sub_category.category}}</h5>
                  <p class="text-capitalize">{{report.description}}</p>
                  <!-- Button trigger modal -->
                    <button type="button" class="btn btn-primary btn-block" data-toggle="modal" data-target="#{{report.id}}">
                        Ver Reporte
                    </button>
                    
                    <!-- Modal -->
                    <div class="modal fade" id="{{report.id}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">{{report.sub_category.category}}</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                            </div>
                            <div class="modal-body">
                                <!--<img class="img-fluid" src="{% static 'core/img/img-reporte.png' %}">-->
                                <p class="view-text text-capitalize"> <b>Tipo de Reporte:</b> {{report.type_report}}</p>
                                <p class="view-text text-capitalize"> <b>SubCategoría:</b> {{report.sub_category}}</p>
                                <p class="view-text text-capitalize"> <b>Fecha:</b> {{report.found_date}} <b>Hora:</b> {{report.found_time}}</p>
                                <p class="view-text text-capitalize">{{report.description}}</p>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                <!--<button type="button" class="btn btn-primary">Save changes</button>-->
                            </div>
                        </div>
                        </div>
                    </div>
                </div>
            </div>
            {% endif %}
            {% endfor %}
        </div>
        </div>
    </div>
    
    <script>
        function openNav() {
            document.getElementById("mySidenav").style.width = "200px";
            document.getElementById("main").style.marginLeft = "150px";
        }

        function closeNav() {
            document.getElementById("mySidenav").style.width = "0";
            document.getElementById("main").style.marginLeft= "0";
            document.body.style.backgroundColor = "white";
        }

        
        button.onclick = function() {
            var filterdate =  $('#filterdate').val();
            var filterdate2 =  $('#filterdate2').val();
        }

    </script>
{% endblock %}
