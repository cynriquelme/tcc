{% extends 'core/base.html' %}
{% load static %}
{% block title %}Reportes{% endblock %}
{% block background %}{% load static %}{% static 'core/img/home-bg.jpg' %}{% endblock %}
{% block headers %}
    <h1>Reportes</h1>
{% endblock %}
{% block content %}
{% include 'reports/includes/report_menu.html' %}
<main role="main">
  <div class="container mb-4">
    {% for report in report_list|dictsort:"id" %}
      <div>
        {% if user.id == report.user.id %}
          <h2>{{report.description}}</h2>
          <div>
            <p>{{report.sub_category|striptags|safe|truncatechars:"200"}}</p>
              <a href="{% url 'reports:update' report.id %}">Editar</a>
              <a href="{% url 'reports:delete' report.id %}">Borrar</a>
          </div>
        {% endif %}
      </div>
    {% endfor %}
  </div>

  {% if is_paginated %}
  <div class= "mt-3">
    <ul class= "pagination justify-content-center">
      {% if page_obj.has_previous %}
        <li class="page-item">
          <a href="?page={{ page_obj.previous_page_number }}" class="page-link">Anterior</a>
        </li>
      {% else %} 
        <li class="page-item disabled">
          <a href="#" class="page-link">Anterior</a>
        </li>
      {% endif %} 
      {% for i in paginator.page_range %}
        <li class="page-item {% if page_obj.number == i %}  active {% endif %}">
          <a href="?page={{ i }}" class="page-link">{{ i }}</a>
        </li>           
      {% endfor %}   
      {% if page_obj.has_next %}
        <li class="page-item">
          <a href="?page={{ page_obj.next_page_number  }}" class="page-link">Siguiente</a>
        </li>
      {% else %} 
        <li class="page-item disabled">
          <a href="#" class="page-link">Siguiente</a>
        </li>
      {% endif %} 
    </ul>
  </div>  
  {% endif %}  
</main>
{% endblock %}
